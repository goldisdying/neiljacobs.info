<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>awkwardgringo - Learn Spanish to Impress</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
        }
        .category-card {
            transition: transform 0.2s;
        }
        .category-card:hover {
            transform: scale(1.05);
        }
        .category-card:active {
            transform: scale(0.98);
        }
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal-overlay.active {
            display: flex;
        }
    </style>
</head>
<body class="bg-gradient-to-b from-gray-900 to-gray-800 min-h-screen text-white">

    <!-- Main Container -->
    <div id="app"></div>

    <!-- Adult Content Modal -->
    <div id="adultModal" class="modal-overlay">
        <div class="bg-gray-900 rounded-2xl p-8 max-w-lg mx-4 border-2 border-red-500 shadow-2xl">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4">‚ö†Ô∏è</div>
                <h2 class="text-3xl font-black text-red-500 mb-4">ADULT CONTENT WARNING</h2>
            </div>
            
            <div class="bg-gray-800 rounded-lg p-6 mb-6 text-sm text-gray-300 space-y-3">
                <p class="font-semibold text-white">You must be at least 18 years old (or the legal age of majority in your jurisdiction) to access this content.</p>
                
                <p class="font-semibold text-white">By clicking "I Agree" below, you confirm that:</p>
                
                <ul class="space-y-2 ml-4">
                    <li>‚Ä¢ You are 18 years of age or older</li>
                    <li>‚Ä¢ You understand this section contains explicit adult language</li>
                    <li>‚Ä¢ You are voluntarily choosing to access this content</li>
                    <li>‚Ä¢ This content is legal to view in your location</li>
                    <li>‚Ä¢ You will not hold awkwardgringo.com liable for any offense</li>
                </ul>
                
                <p class="mt-4 text-xs text-gray-400">This content is provided for educational and informational purposes only. Awkwardgringo.com does not endorse or encourage any specific behavior.</p>
            </div>
            
            <label class="flex items-center gap-3 mb-6 cursor-pointer">
                <input type="checkbox" id="adultConsent" class="w-5 h-5 cursor-pointer">
                <span class="text-white font-semibold">I am 18+ and agree to view adult content</span>
            </label>
            
            <div class="flex gap-4">
                <button onclick="closeAdultModal()" 
                        class="flex-1 bg-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-600 transition">
                    Cancel
                </button>
                <button onclick="acceptAdultContent()" 
                        id="agreeButton"
                        class="flex-1 bg-red-500 px-6 py-3 rounded-xl font-semibold hover:bg-red-600 transition opacity-50 cursor-not-allowed"
                        disabled>
                    I Agree
                </button>
            </div>
        </div>
    </div>

    <!-- PapaParse for CSV parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    
    <script>
        // Global state
        let allPhrases = [];
        let currentCategory = null;
        let currentBlock = 1;
        let currentPhraseIndex = 0;
        let categoryPhrases = [];

        // Category configurations
        const categories = {
            'first-date': {
                name: 'First Date',
                icon: '‚ù§Ô∏è',
                color: 'bg-pink-500'
            },
            'compliments': {
                name: 'Compliments',
                icon: 'üí¨',
                color: 'bg-purple-500'
            },
            'food-drinks': {
                name: 'Food & Drinks',
                icon: 'üçΩÔ∏è',
                color: 'bg-orange-500'
            },
            'meeting-family': {
                name: 'Meeting Family',
                icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',
                color: 'bg-blue-500'
            },
            'spicy': {
                name: 'Spicy üå∂Ô∏è',
                icon: 'üî•',
                color: 'bg-red-500'
            },
            'adult-rated': {
                name: 'Adult Rated üîû',
                icon: 'üíã',
                color: 'bg-pink-600'
            },
            'basics': {
                name: 'Learn Basics',
                icon: 'üìö',
                color: 'bg-green-500'
            }
        };

        // Adult content consent handling
        function checkAdultConsent() {
            return localStorage.getItem('adultConsent') === 'true';
        }

        function showAdultModal() {
            document.getElementById('adultModal').classList.add('active');
            document.getElementById('adultConsent').checked = false;
            document.getElementById('agreeButton').disabled = true;
            document.getElementById('agreeButton').classList.add('opacity-50', 'cursor-not-allowed');
        }

        function closeAdultModal() {
            document.getElementById('adultModal').classList.remove('active');
        }

        function acceptAdultContent() {
            if (document.getElementById('adultConsent').checked) {
                localStorage.setItem('adultConsent', 'true');
                closeAdultModal();
                // Proceed to show the adult-rated category
                selectCategoryDirect('adult-rated');
            }
        }

        // Enable/disable agree button based on checkbox
        document.addEventListener('DOMContentLoaded', function() {
            const checkbox = document.getElementById('adultConsent');
            const agreeButton = document.getElementById('agreeButton');
            
            if (checkbox) {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        agreeButton.disabled = false;
                        agreeButton.classList.remove('opacity-50', 'cursor-not-allowed');
                    } else {
                        agreeButton.disabled = true;
                        agreeButton.classList.add('opacity-50', 'cursor-not-allowed');
                    }
                });
            }
        });

        // Load CSV data
        async function loadPhrases() {
            try {
                const response = await fetch('awkwardgringo - directory.csv');
                const csvText = await response.text();
                
                Papa.parse(csvText, {
                    header: true,
                    skipEmptyLines: true,
                    complete: function(results) {
                        allPhrases = results.data;
                        console.log(`Loaded ${allPhrases.length} phrases`);
                        renderHome();
                    },
                    error: function(error) {
                        console.error('Error parsing CSV:', error);
                        document.getElementById('app').innerHTML = `
                            <div class="p-6 text-center">
                                <h2 class="text-2xl font-bold text-red-500 mb-4">Error Loading Phrases</h2>
                                <p class="text-gray-300">Make sure 'awkwardgringo - directory.csv' is in the same folder as this HTML file.</p>
                            </div>
                        `;
                    }
                });
            } catch (error) {
                console.error('Error loading CSV:', error);
                document.getElementById('app').innerHTML = `
                    <div class="p-6 text-center">
                        <h2 class="text-2xl font-bold text-red-500 mb-4">Error Loading File</h2>
                        <p class="text-gray-300">Could not load phrases. Make sure the CSV file exists.</p>
                    </div>
                `;
            }
        }

        // Render home screen
        function renderHome() {
            const app = document.getElementById('app');
            app.innerHTML = `
                <!-- Header -->
                <div class="bg-gradient-to-r from-yellow-500 to-orange-500 p-8 text-center">
                    <h1 class="text-5xl font-black text-gray-900 mb-2" style="letter-spacing: -0.02em;">awkwardgringo</h1>
                    <p class="text-gray-800 text-xl font-semibold">Learn Spanish to impress üíÉ</p>
                </div>

                <!-- Hero Section -->
                <div class="p-6 max-w-md mx-auto">
                    <div class="bg-gradient-to-br from-pink-600 to-purple-600 rounded-2xl p-8 mb-8 text-center shadow-xl">
                        <h2 class="text-3xl font-black mb-3" style="letter-spacing: -0.01em;">Stop Being Awkward</h2>
                        <p class="text-gray-100 mb-4 font-medium text-lg">
                            Master the phrases that actually matter when dating Latinas
                        </p>
                        <div class="bg-white/20 backdrop-blur rounded-lg p-4">
                            <p class="text-sm text-gray-100">
                                üí° Real scenarios, authentic phrases, zero cringe
                            </p>
                        </div>
                    </div>

                    <!-- Categories -->
                    <h3 class="text-2xl font-black mb-4 text-gray-100" style="letter-spacing: -0.01em;">Choose Your Scenario</h3>
                    
                    <div class="space-y-3">
                        ${Object.keys(categories).map(catKey => {
                            const cat = categories[catKey];
                            return `
                                <button onclick="selectCategory('${catKey}')" 
                                        class="category-card w-full ${cat.color} rounded-xl p-5 flex items-center justify-between shadow-lg">
                                    <div class="flex items-center gap-4">
                                        <div class="bg-white/20 p-3 rounded-lg">
                                            <span class="text-2xl">${cat.icon}</span>
                                        </div>
                                        <span class="font-semibold text-lg">${cat.name}</span>
                                    </div>
                                    <span class="text-2xl">‚Ä∫</span>
                                </button>
                            `;
                        }).join('')}
                    </div>

                    <!-- Footer CTA -->
                    <div class="mt-12 bg-gray-800 rounded-xl p-6 text-center">
                        <p class="text-gray-400 mb-3">Ready to level up your game?</p>
                        <p class="text-2xl mb-4">üî• 100% Free to Use üî•</p>
                        <p class="text-sm text-gray-500 mb-2">
                            No sign-up required. Just start learning.
                        </p>
                        <p class="text-xs text-gray-600 mt-4 border-t border-gray-700 pt-4">
                            ‚ö†Ô∏è This site contains adult content. 18+ only.
                        </p>
                    </div>
                </div>
            `;
        }

        // Select category and show block selection
        function selectCategory(categoryKey) {
            // Check if adult-rated and no consent given
            if (categoryKey === 'adult-rated' && !checkAdultConsent()) {
                showAdultModal();
                return;
            }
            
            selectCategoryDirect(categoryKey);
        }

        // Direct category selection (bypasses consent check)
        function selectCategoryDirect(categoryKey) {
            currentCategory = categoryKey;
            const phrases = allPhrases.filter(p => p.category === categoryKey);
            
            // Get unique blocks
            const blocks = [...new Set(phrases.map(p => parseInt(p.block)))].sort();
            
            const cat = categories[categoryKey];
            const app = document.getElementById('app');
            
            app.innerHTML = `
                <div class="min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white">
                    <div class="p-6">
                        <button onclick="renderHome()" class="text-gray-400 mb-6 flex items-center gap-2">
                            <span>‚Üê</span> Back
                        </button>
                        
                        <div class="max-w-md mx-auto">
                            <div class="flex items-center gap-4 mb-8">
                                <span class="text-5xl">${cat.icon}</span>
                                <h2 class="text-3xl font-black" style="letter-spacing: -0.01em;">${cat.name}</h2>
                            </div>
                            
                            <p class="text-gray-300 mb-6">Choose a block to start learning (10 phrases per block):</p>
                            
                            <div class="space-y-3">
                                ${blocks.map(blockNum => `
                                    <button onclick="startLearning('${categoryKey}', ${blockNum})" 
                                            class="w-full ${cat.color} rounded-xl p-5 flex items-center justify-between shadow-lg category-card">
                                        <div class="flex items-center gap-4">
                                            <div class="bg-white/20 p-3 rounded-lg font-bold text-xl">
                                                ${blockNum}
                                            </div>
                                            <span class="font-semibold text-lg">Block ${blockNum}</span>
                                        </div>
                                        <span class="text-2xl">‚Ä∫</span>
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Start learning with selected block
        function startLearning(categoryKey, blockNum) {
            currentCategory = categoryKey;
            currentBlock = blockNum;
            currentPhraseIndex = 0;
            
            // Get phrases for this category and block
            categoryPhrases = allPhrases.filter(p => 
                p.category === categoryKey && parseInt(p.block) === blockNum
            );
            
            if (categoryPhrases.length === 0) {
                alert('No phrases found for this block!');
                return;
            }
            
            renderLearning();
        }

        // Render learning screen
        function renderLearning() {
            if (currentPhraseIndex >= categoryPhrases.length) {
                // Completed this block
                renderBlockComplete();
                return;
            }
            
            const phrase = categoryPhrases[currentPhraseIndex];
            const cat = categories[currentCategory];
            const app = document.getElementById('app');
            
            // Calculate global index for this phrase (for audio filename)
            const globalIndex = allPhrases.findIndex(p => 
                p.category === phrase.category && 
                p.block === phrase.block && 
                p.spanish === phrase.spanish
            ) + 1;
            
            app.innerHTML = `
                <div class="min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white p-6">
                    <button onclick="selectCategory('${currentCategory}')" class="text-gray-400 mb-6 flex items-center gap-2">
                        <span>‚Üê</span> Back to Blocks
                    </button>
                    
                    <div class="max-w-md mx-auto">
                        <h2 class="text-3xl font-black mb-8 text-center" style="letter-spacing: -0.01em;">
                            ${cat.name} - Block ${currentBlock}
                        </h2>
                        
                        <div class="bg-gray-800 rounded-2xl p-8 mb-6 shadow-xl">
                            <div class="text-center mb-6">
                                <p class="text-gray-400 text-sm mb-2">English</p>
                                <p class="text-xl mb-6">${phrase.english}</p>
                                
                                <p class="text-gray-400 text-sm mb-2">Spanish</p>
                                <p class="text-3xl font-bold text-yellow-400 mb-6">${phrase.spanish}</p>
                                
                                <button onclick="playAudio('${phrase.spanish}')" 
                                        class="bg-yellow-500 text-gray-900 px-6 py-3 rounded-full font-semibold flex items-center gap-2 mx-auto hover:bg-yellow-400 transition">
                                    <span>üîä</span>
                                    Play Audio
                                </button>
                            </div>
                            
                            <div class="border-t border-gray-700 pt-6">
                                <p class="text-gray-400 text-sm mb-2">Pronunciation</p>
                                <p class="text-lg text-gray-300 italic">${phrase.pronunciation}</p>
                                ${phrase.notes ? `
                                    <div class="mt-4">
                                        <p class="text-gray-400 text-sm mb-2">Note</p>
                                        <p class="text-sm text-yellow-300">${phrase.notes}</p>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                        
                        <div class="flex justify-between gap-4 mb-4">
                            <button onclick="previousPhrase()" 
                                    ${currentPhraseIndex === 0 ? 'disabled' : ''}
                                    class="flex-1 bg-gray-700 px-6 py-3 rounded-full font-semibold disabled:opacity-30 hover:bg-gray-600 transition">
                                Previous
                            </button>
                            <button onclick="nextPhrase()" 
                                    class="flex-1 bg-yellow-500 text-gray-900 px-6 py-3 rounded-full font-semibold hover:bg-yellow-400 transition">
                                ${currentPhraseIndex === categoryPhrases.length - 1 ? 'Finish' : 'Next'}
                            </button>
                        </div>
                        
                        <p class="text-center text-gray-500 mt-4">
                            ${currentPhraseIndex + 1} of ${categoryPhrases.length}
                        </p>
                    </div>
                </div>
            `;
        }

        // Block complete screen
        function renderBlockComplete() {
            const cat = categories[currentCategory];
            const app = document.getElementById('app');
            
            app.innerHTML = `
                <div class="min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white p-6 flex items-center justify-center">
                    <div class="max-w-md mx-auto text-center">
                        <div class="text-6xl mb-6">üéâ</div>
                        <h2 class="text-4xl font-black mb-4">Block Complete!</h2>
                        <p class="text-xl text-gray-300 mb-8">
                            You finished Block ${currentBlock} of ${cat.name}
                        </p>
                        
                        <div class="space-y-3">
                            <button onclick="selectCategory('${currentCategory}')" 
                                    class="w-full bg-yellow-500 text-gray-900 px-6 py-4 rounded-xl font-semibold text-lg hover:bg-yellow-400 transition">
                                Choose Another Block
                            </button>
                            <button onclick="renderHome()" 
                                    class="w-full bg-gray-700 px-6 py-4 rounded-xl font-semibold text-lg hover:bg-gray-600 transition">
                                Back to Categories
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Navigation functions
        function nextPhrase() {
            currentPhraseIndex++;
            renderLearning();
        }

        function previousPhrase() {
            if (currentPhraseIndex > 0) {
                currentPhraseIndex--;
                renderLearning();
            }
        }

        // Text-to-speech for Spanish
        function playAudio(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'es-ES'; // Spanish
                utterance.rate = 0.8; // Slightly slower for learning
                speechSynthesis.speak(utterance);
            } else {
                alert('Text-to-speech not supported in your browser');
            }
        }

        // Initialize app
        window.onload = function() {
            loadPhrases();
        };
    </script>
</body>
</html>
